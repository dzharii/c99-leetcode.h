# Hello
Date: 2025-08-01

Clarified goal

- Build a reusable local project for practicing LeetCode in strict C89.
- Replicate LeetCode runtime as closely as possible while enforcing `-std=c89` locally.
- Maintain a helper library (`leetcode_lib`) you will grow over time, exposed by one public header `leetcode.h`.
- Write each LeetCode solution and its assertions in a test file living under `tests/`, executed by a C-unit-test framework that works with C89.
- Keep third-party code vendored so the project builds offline and identically on Windows and Linux.

Project layout (relative to repo root)

```
/leetcode-c89-practice
├── CMakeLists.txt
├── third_party
│   ├── unity
│   │   ├── unity.c
│   │   ├── unity.h
│   │   └── unity_internals.h
│   └── uthash
│       └── uthash.h
├── leetcode_lib
│   ├── leetcode.h
│   ├── array_utils.c
│   ├── string_utils.c
│   └── …                       /* more helpers as you create them */
└── tests
    ├── CMakeLists.txt
    └── two_sum_test.c          /* one test file per LeetCode problem */
```

Third-party components

- **Unity** (MIT, single C file plus two headers) provides the simplest portable xUnit-style test runner that compiles cleanly under C89([GitHub](https://github.com/ThrowTheSwitch/Unity)).
   Download: `git clone --depth 1 https://github.com/ThrowTheSwitch/Unity.git` and copy `Unity/src/{unity.c,unity.h,unity_internals.h}` into `third_party/unity`.
- **uthash.h** is already available in the judge and often useful; copy the single header from https://github.com/troydhanson/uthash into `third_party/uthash`([troydhanson.github.io](https://troydhanson.github.io/uthash/userguide.html?utm_source=chatgpt.com)).
- No other libraries are pre-loaded by LeetCode for C, so everything else stays in your repo.

Build system (CMake)

- Put the following near the top of root `CMakeLists.txt` (works on gcc/clang and MSVC):

  ```cmake
  cmake_minimum_required(VERSION 3.20)
  project(leetcode_c89 C)
  set(CMAKE_C_STANDARD 89)
  set(CMAKE_C_EXTENSIONS OFF)
  add_compile_options(-Wall -Wextra -O2)
  add_subdirectory(leetcode_lib)
  add_subdirectory(tests)
  ```

- `leetcode_lib/CMakeLists.txt`

  ```cmake
  file(GLOB SRC *.c)
  add_library(leetcode_lib STATIC ${SRC})
  target_include_directories(leetcode_lib PUBLIC ${CMAKE_CURRENT_SOURCE_DIR})
  ```

- `tests/CMakeLists.txt`

  ```cmake
  file(GLOB TEST_SRC *.c)
  add_executable(run_tests ${TEST_SRC}
                 ${PROJECT_SOURCE_DIR}/third_party/unity/unity.c)
  target_include_directories(run_tests PRIVATE
      ${PROJECT_SOURCE_DIR}/third_party/unity
      ${PROJECT_SOURCE_DIR}/third_party/uthash
      ${PROJECT_SOURCE_DIR}/leetcode_lib)
  target_link_libraries(run_tests leetcode_lib)
  add_test(NAME all COMMAND run_tests)
  ```

- Build and run tests:

  ```
  cmake -S . -B build
  cmake --build build
  ctest --test-dir build
  ```

Local compiler flags vs LeetCode

- LeetCode uses gcc 14 with `-std=gnu11 -O2 -fsanitize=address` and pre-includes standard headers and `uthash.h`([support.leetcode.com](https://support.leetcode.com/hc/en-us/articles/360011833974-What-are-the-environments-for-the-programming-languages)).
- Your local settings tighten this to strict ANSI C89 with `-std=c89 -pedantic`; keep `-O2 -fsanitize=address` if the sanitizer supports C89 on your toolchain.

Workflow for a new problem

- Create `tests/<slug>_test.c`.
- Inside that file:
  1. `#include "unity.h"`
  2. `#include "leetcode.h"`
  3. Write your solution function in the same file (or in its own source under `leetcode_lib` if reusable).
  4. Write one or more `TEST_<name>()` functions asserting expected outputs.
  5. Provide `void setUp(void){}` and `void tearDown(void){}` even if empty, then call `UNITY_BEGIN(); RUN_TEST(...); return UNITY_END();`.
- Reconfigure and rebuild; CMake will detect the new test file automatically.

Initial tasks checklist

- Install CMake >= 3.20 and a C compiler (gcc or clang) that accepts `-std=c89`.
- Clone this template or create directories as shown.
- Vendor Unity and uthash into `third_party`.
- Add a minimal `leetcode.h` with placeholder helper declarations, plus one `.c` source file in `leetcode_lib`.
- Add a trivial example test such as `two_sum_test.c` to verify the build.

You can now focus almost exclusively on authoring problem-specific code under `tests/`; helpers that become generally useful should move into `leetcode_lib` as you grow the project.



