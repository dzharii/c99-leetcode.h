# .clang-format tuned for this header

BasedOnStyle: LLVM
ColumnLimit: 100
UseTab: Never
IndentWidth: 4
TabWidth: 4
ContinuationIndentWidth: 4
KeepLineBreaks: true
ReflowComments: false

# Braces and short things
BreakBeforeBraces: Attach
AlwaysBreakAfterReturnType: None
PenaltyReturnTypeOnItsOwnLine: 1000000
AllowShortFunctionsOnASingleLine: None
AllowShortBlocksOnASingleLine: Always
AllowShortIfStatementsOnASingleLine: Always
AllowShortLoopsOnASingleLine: false

# No column alignment or pretty-up spacing
AlignAfterOpenBracket: DontAlign
AlignConsecutiveAssignments: false
AlignConsecutiveDeclarations: false
AlignConsecutiveMacros: false
AlignOperands: false
AlignTrailingComments: false

# Parameters and arguments: force one-per-line once broken
BinPackArguments: false
BinPackParameters: false
AllowAllArgumentsOnNextLine: false
AllowAllParametersOfDeclarationOnNextLine: false

# Pointers, casts, parens
DerivePointerAlignment: false
PointerAlignment: Left         # e.g., const char* p -> const char *p
SpaceAfterCStyleCast: false
SpaceBeforeParens: ControlStatements

# Includes and preprocessor
SortIncludes: false
IncludeBlocks: Preserve
IndentPPDirectives: None
SortUsingDeclarations: false

# Extern "C" block like in this header
IndentExternBlock: NoIndent

# Misc
Cpp11BracedListStyle: true
BreakStringLiterals: false
IndentCaseLabels: true
IndentGotoLabels: false

---
# Apply the same rules when parsed as C (headers often compile as both)
Language: C
BasedOnStyle: LLVM
ColumnLimit: 100
UseTab: Never
IndentWidth: 4
ContinuationIndentWidth: 4
KeepLineBreaks: true
ReflowComments: false
BreakBeforeBraces: Allman
AlwaysBreakAfterReturnType: None
PenaltyReturnTypeOnItsOwnLine: 1000000
AllowShortFunctionsOnASingleLine: None
AllowShortBlocksOnASingleLine: Never
AllowShortIfStatementsOnASingleLine: Never
AllowShortLoopsOnASingleLine: false
AlignAfterOpenBracket: DontAlign
AlignConsecutiveAssignments: false
AlignConsecutiveDeclarations: false
AlignConsecutiveMacros: false
AlignOperands: false
AlignTrailingComments: false

# Parameters and arguments: force one-per-line once broken
BinPackArguments: false
BinPackParameters: false
AllowAllArgumentsOnNextLine: false
AllowAllParametersOfDeclarationOnNextLine: false

DerivePointerAlignment: false
PointerAlignment: Right
SpaceAfterCStyleCast: true
SpaceBeforeParens: ControlStatements
SortIncludes: false
IncludeBlocks: Preserve
IndentPPDirectives: None
IndentExternBlock: NoIndent
Cpp11BracedListStyle: true
BreakStringLiterals: false
IndentCaseLabels: true
IndentGotoLabels: false
